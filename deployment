1、相关yaml文件：

apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  selector:
    matchLabels:
      app: nginx-deploy
  replicas: 2
  template:
    metadata:
      labels:
        app: nginx-deploy
    spec:
      containers:
      - name: nginx
        image: nginx:alpine
        ports:
        - containerPort: 80

2、创建deployment
[root@fintest yaml]# kubectl apply -f nginx-dep01.yaml 
deployment.apps/nginx-deployment created
[root@fintest yaml]# 

3、查看deployment
[root@fintest ~]# kubectl get pod --show-labels
NAME                       READY   STATUS    RESTARTS   AGE     LABELS
my-nginx-c7dd45d78-ftwnp   1/1     Running   0          3h37m   app=my-nginx,pod-template-hash=c7dd45d78
my-nginx-c7dd45d78-zz65h   1/1     Running   0          22h     app=my-nginx,pod-template-hash=c7dd45d78
nginx-pod                  1/1     Running   0          26m     app=nginx-pod
[root@fintest ~]# kubectl get pod --show-labels
NAME                               READY   STATUS              RESTARTS   AGE     LABELS
my-nginx-c7dd45d78-ftwnp           1/1     Running             0          3h38m   app=my-nginx,pod-template-hash=c7dd45d78
my-nginx-c7dd45d78-zz65h           1/1     Running             0          22h     app=my-nginx,pod-template-hash=c7dd45d78
nginx-deployment-fc6884c76-gx9ck   0/1     ContainerCreating   0          6s      app=nginx-deploy,pod-template-hash=fc6884c76
nginx-deployment-fc6884c76-qxh57   1/1     Running             0          6s      app=nginx-deploy,pod-template-hash=fc6884c76
nginx-pod                          1/1     Running             0          27m     app=nginx-pod
[root@fintest ~]# kubectl get pod --show-labels
NAME                               READY   STATUS    RESTARTS   AGE     LABELS
my-nginx-c7dd45d78-ftwnp           1/1     Running   0          3h39m   app=my-nginx,pod-template-hash=c7dd45d78
my-nginx-c7dd45d78-zz65h           1/1     Running   0          22h     app=my-nginx,pod-template-hash=c7dd45d78
nginx-deployment-fc6884c76-gx9ck   1/1     Running   0          22s     app=nginx-deploy,pod-template-hash=fc6884c76
nginx-deployment-fc6884c76-qxh57   1/1     Running   0          22s     app=nginx-deploy,pod-template-hash=fc6884c76
nginx-pod                          1/1     Running   0          27m     app=nginx-pod
[root@fintest ~]# 

4、查看deployment详细

[root@fintest ~]# kubectl describe deployment nginx-deployment
Name:                   nginx-deployment
Namespace:              default
CreationTimestamp:      Wed, 06 Jan 2021 17:55:43 +0800
Labels:                 <none>
Annotations:            deployment.kubernetes.io/revision: 1
Selector:               app=nginx-deploy
Replicas:               2 desired | 2 updated | 2 total | 2 available | 0 unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        0
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:  app=nginx-deploy
  Containers:
   nginx:
    Image:        nginx:alpine
    Port:         80/TCP
    Host Port:    0/TCP
    Environment:  <none>
    Mounts:       <none>
  Volumes:        <none>
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    NewReplicaSetAvailable
OldReplicaSets:  <none>
NewReplicaSet:   nginx-deployment-fc6884c76 (2/2 replicas created)
Events:
  Type    Reason             Age    From                   Message
  ----    ------             ----   ----                   -------
  Normal  ScalingReplicaSet  2m12s  deployment-controller  Scaled up replica set nginx-deployment-fc6884c76 to 2
[root@fintest ~]# 

5、查看日志
[root@fintest ~]# kubectl logs -f nginx-deployment-fc6884c76-gx9ck 
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
172.18.175.61 - - [06/Jan/2021:10:01:03 +0000] "GET / HTTP/1.1" 200 612 "-" "curl/7.61.1" "-"
172.18.175.61 - - [06/Jan/2021:10:01:05 +0000] "GET / HTTP/1.1" 200 612 "-" "curl/7.61.1" "-"




